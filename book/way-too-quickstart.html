<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js oranda-dark">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Way Too Quick Start - cargo-dist</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">
        <link rel="stylesheet" href="oranda-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "oranda-dark" : "oranda-dark";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('orandamdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('orandamdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('orandamdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('oranda-dark')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">2.</strong> Install</a></li><li class="chapter-item expanded "><a href="way-too-quickstart.html" class="active"><strong aria-hidden="true">3.</strong> Way Too Quick Start</a></li><li class="chapter-item expanded "><a href="guide.html"><strong aria-hidden="true">4.</strong> Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="simple-guide.html"><strong aria-hidden="true">4.1.</strong> A Simple Application</a></li><li class="chapter-item expanded "><a href="workspace-guide.html"><strong aria-hidden="true">4.2.</strong> More Complex Workspaces</a></li><li class="chapter-item expanded "><a href="cargo-release-guide.html"><strong aria-hidden="true">4.3.</strong> Using cargo-release</a></li></ol></li><li class="chapter-item expanded "><a href="reference.html"><strong aria-hidden="true">5.</strong> Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="concepts.html"><strong aria-hidden="true">5.1.</strong> Concepts</a></li><li class="chapter-item expanded "><a href="config.html"><strong aria-hidden="true">5.2.</strong> Config</a></li><li class="chapter-item expanded "><a href="artifacts.html"><strong aria-hidden="true">5.3.</strong> Artifacts</a></li><li class="chapter-item expanded "><a href="installers.html"><strong aria-hidden="true">5.4.</strong> Installers</a></li><li class="chapter-item expanded "><a href="cli.html"><strong aria-hidden="true">5.5.</strong> CLI Manual</a></li><li class="chapter-item expanded "><a href="schema.html"><strong aria-hidden="true">5.6.</strong> dist-manifest.json</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="oranda-dark">Axo Dark</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="oranda-light">Axo Light</button></li>

                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">cargo-dist</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/axodotdev/cargo-dist" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/axodotdev/cargo-dist/edit/main/book/src/way-too-quickstart.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="way-too-quickstart"><a class="header" href="#way-too-quickstart">Way-Too-Quickstart</a></h1>
<ul>
<li><a href="#setup">Setup</a></li>
<li><a href="#test-locally">Test Locally</a>
<ul>
<li><a href="#build-for-the-current-platform">Build For The Current Platform</a></li>
<li><a href="#check-what-ci-will-build">Check What CI Will Build</a></li>
</ul>
</li>
<li><a href="#cut-a-release-trigger-github-ci">Cut A Release (Trigger Github CI)</a>
<ul>
<li><a href="#streamlining-cutting-a-release">Streamlining Cutting A Release</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>TLDR: cargo-dist is a souped up version of <code>cargo build</code> which handles building tarballs/zips and <a href="./installers.html">installers</a>. It also knows how to generate Github CI for orchestrating itself and uploading its output to a new Github Release. You can use cargo-dist if you don't care about that CI stuff, but this guide assumes that you do.</p>
<p>This quickstart is a bit <em>too</em> quick because there's some important nuances to &quot;announcing and building releases&quot; that depend on the way you like to structure and version your workspace. We will blatantly ignore those nuances and show you the Happiest Happy Path (a workspace with one crate that defines a binary). Checkout <a href="./guide.html">the guide</a> for more details on what you should <em>actually</em> do.</p>
</blockquote>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<p>Setting up just requires you to <a href="./install.html">install cargo-dist</a> and then run <code>cargo dist init</code> in your <a href="https://doc.rust-lang.org/cargo/reference/workspaces.html">Cargo workspace</a>. This command interactively walks you through configuration options, and can be run again whenever you want to change your settings. Since this is the <em>way-too</em>-quickstart, we pass <code>--yes</code> to auto-accept all defaults!</p>
<pre><code class="language-sh"># install tools (build from source is the most portable option)
cargo install cargo-dist

# setup cargo-dist in your project (--yes to accept defaults)
cargo dist init --yes
git add .
git commit -am &quot;wow shiny new cargo-dist CI!&quot;
</code></pre>
<p>The one-time setup will add a decent default configuration to your root Cargo.toml and generate CI for orchestrating itself in <code>.github/workflows/release.yml</code>. If the CI file isn't created, this probably means you don't have <code>repository = &quot;https://github.com/...&quot;</code> consistently set in your Cargo.toml(s).</p>
<h2 id="test-locally"><a class="header" href="#test-locally">Test Locally</a></h2>
<p>When testing out cargo-dist locally, the two biggest things you might be interested in are:</p>
<ol>
<li>build for the current platform (<code>cargo dist build</code>)</li>
<li>check what CI will build (<code>cargo dist plan</code>)</li>
</ol>
<h3 id="build-for-the-current-platform"><a class="header" href="#build-for-the-current-platform">Build For The Current Platform</a></h3>
<pre><code class="language-sh">cargo dist build
</code></pre>
<p><img src="./img/quickstart-build.png" alt="Running &quot;cargo dist build&quot; on a project, resulting in the application getting built and bundled into a .zip, and an &quot;installer.ps1&quot; script getting generated. Paths to these files are printed along with some metadata." /></p>
<p>The <a href="./cli.html#cargo-dist-build">build command</a> will by default try to build things for the computer you're running it on. So if you run it on linux you might get a <code>tar.xz</code> containing your binary and an installer shell script, but if you run it on windows you might get a <code>zip</code> and an installer <em>power</em>shell script.</p>
<p>cargo-dist will then spit out paths to the files it created, so you can inspect their contents and try running them (<strong>note that installer scripts probably won't be locally runnable, because they will try to fetch their binaries from Github</strong>).</p>
<p>See <a href="./concepts.html#artifact-modes-selecting-artifacts">artifact modes</a> for more advanced details on selecting what things cargo-dist should build.</p>
<h3 id="check-what-ci-will-build"><a class="header" href="#check-what-ci-will-build">Check What CI Will Build</a></h3>
<pre><code class="language-sh">cargo dist plan
</code></pre>
<p><img src="./img/quickstart-build.png" alt="Running &quot;cargo dist plan&quot; on a project, producing a full printout of the tarballs/zips that will be produced for all platforms (mac, linux, windows), and all installers (shell, powershell)" /></p>
<p>The <a href="./cli.html#cargo-dist-plan">plan command</a> should be running the exact same logic that cargo-dist's generated CI will run, but without actually building anything. This lets you quickly check what cutting a new release will produce. It will also try to catch any inconsistencies that could make the CI error out.</p>
<h2 id="cut-a-release-trigger-github-ci"><a class="header" href="#cut-a-release-trigger-github-ci">Cut A Release (Trigger Github CI)</a></h2>
<p>cargo-dist largely doesn't care about the details of how you prepare your release, and intentionally doesn't provide tools to streamline it (see the next section for some recommendations). All it cares about is you getting your main branch into the state you want, and then pushing a properly formatted git tag like &quot;v0.1.0&quot;. Here's a super bare-bones release process:</p>
<pre><code class="language-sh"># &lt;manually update the version of your crate, run tests, etc&gt;

# commit and push to main (can be done with a PR)
git commit -am &quot;chore: Release version 0.1.0&quot;
git push

# publish to crates.io (optional)
cargo publish

# actually push the tag up (this triggers cargo-dist's CI)
git tag v0.1.0
git push --tags
</code></pre>
<p>The important parts are that you update the crates you want to release/announce to the desired version and push a git tag with that version. (prefixed with <code>v</code>!)</p>
<p>At this point you're done! The generated CI script should pick up the ball and create a Github Release with all your builds over the next few minutes!</p>
<h3 id="streamlining-cutting-a-release"><a class="header" href="#streamlining-cutting-a-release">Streamlining Cutting A Release</a></h3>
<p>You may have noticed &quot;cut a release&quot; still has a lot of tedious work. That's because we recommend using <a href="https://github.com/crate-ci/cargo-release">cargo-release</a> to streamline the last step, which in <em>simple workspaces</em> will do exactly the same thing as above (but more robustly):</p>
<pre><code class="language-sh"># install tools
cargo install cargo-release

# cut a release
cargo release 0.1.0
</code></pre>
<p>(I left off the <code>--execute</code> flag from <code>cargo-release</code> so you won't accidentally break anything if you really did just copy paste that ðŸ˜‡)</p>
<p>For more details on using cargo-release with cargo-dist, see <a href="./cargo-release-guide.html">the guide for that</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="install.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="guide.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="install.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="guide.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
